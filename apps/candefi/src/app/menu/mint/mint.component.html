<ng-container *ngIf="state$ | async as s">
  <p-steps
    [model]="s.steps"
    [readonly]="true"
    [activeIndex]="s.activeMenuIndex"
    (activeIndexChange)="(s.steps[s.activeMenuIndex].command)"
  ></p-steps>

  <div class="flex flex-column p-5">
    <div class="flex align-items-center justify-content-center">
      <div [hidden]="s.activeMenuIndex !== 0">
        <form [formGroup]="form">
          <div class="mb-5 p-fluid">
            <p-selectButton
              [options]="s.selectBtnOptions"
              formControlName="type"
              optionValue="value"
              optionLabel="label"
            ></p-selectButton>
          </div>
          <div class="mb-5 p-fluid">
            <p-dropdown
              appendTo="body"
              formControlName="market"
              [options]="s.marketOptions"
            >
              <ng-template pTemplate="selectedItem" let-item>
                <div *ngIf="market">
                  <div class="flex align-items-center">
                    <img
                      [src]="'assets/images/' + item.value + '.png'"
                      width="15"
                    />
                    <div class="ml-2">{{ item.label }}</div>
                  </div>
                </div>
              </ng-template>
              <ng-template let-item pTemplate="item">
                <div class="flex align-items-center">
                  <img
                    [src]="'assets/images/' + item.value + '.png'"
                    width="15"
                  />
                  <div class="ml-2">{{ item.label }}</div>
                </div>
              </ng-template>
            </p-dropdown>
          </div>
          <div class="mb-5">
            <span class="p-float-label">
              <p-inputNumber
                formControlName="strike"
                prefix="$"
                [min]="0"
                id="strike"
              ></p-inputNumber>
              <label for="strike">Strike Price</label>
            </span>
          </div>
          <div class="mb-5">
            <span class="p-float-label">
              <p-inputNumber
                formControlName="stake"
                mode="decimal"
                suffix=" $CANDY"
                [maxFractionDigits]="0"
                [minFractionDigits]="0"
                [min]="5000"
                id="stake"
              ></p-inputNumber>
              <label for="stake">Stake</label>
            </span>
          </div>
          <div class="mb-5">
            <span class="p-float-label">
              <p-inputNumber
                formControlName="value"
                suffix=" $CANDY"
                [min]="0"
                id="value"
              ></p-inputNumber>
              <label for="stake">Initial Value</label>
            </span>
          </div>
        </form>
      </div>
    </div>

    <div [hidden]="s.activeMenuIndex !== 1">Strike</div>
    <div
      class="flex"
      [ngClass]="
        s.activeMenuIndex === 0
          ? 'justify-content-end'
          : 'justify-content-between'
      "
    >
      <div [hidden]="s.activeMenuIndex === 0">
        <button
          pButton
          icon="pi pi-angle-left"
          iconPos="left"
          label="Back"
          (click)="s.activeMenuIndex = s.activeMenuIndex - 1"
        ></button>
      </div>
      <div [hidden]="s.activeMenuIndex === s.steps.length - 1">
        <button
          pButton
          icon="pi pi-angle-right"
          iconPos="right"
          label="Next"
          (click)="s.activeMenuIndex = s.activeMenuIndex + 1"
        ></button>
      </div>
    </div>
  </div>

  <!-- <form [formGroup]="form" (ngSubmit)="mint()">
    <div class="mb-5 mt-4">
      <span class="p-float-label">
        <input pInputText id="type" formControlName="type" />
        <label for="type">Type</label>
      </span>
    </div>
    <div class="mb-5">
      <span class="p-float-label">
        <input pInputText id="asset" formControlName="asset" readonly />
        <label for="asset">Asset</label>
      </span>
    </div>
    <div class="mb-5">
      <span class="p-float-label">
        <p-inputNumber
          formControlName="strike"
          prefix="$"
          [min]="0"
          id="strike"
        ></p-inputNumber>
        <label for="strike">Strike Price</label>
      </span>
    </div>
    <div class="mb-5">
      <span class="p-float-label">
        <p-inputNumber
          formControlName="stake"
          mode="decimal"
          suffix=" $CANDY"
          [maxFractionDigits]="0"
          [minFractionDigits]="0"
          [min]="5000"
          id="stake"
        ></p-inputNumber>
        <label for="stake">Stake</label>
      </span>
    </div>
    <div class="mb-5">
      <span class="p-float-label">
        <p-inputNumber
          formControlName="value"
          suffix=" $CANDY"
          [min]="0"
          id="value"
        ></p-inputNumber>
        <label for="stake">Initial Value</label>
      </span>
    </div>
    <div class="mb-5">
      <span class="p-float-label">
        <input
          type="text"
          id="duration"
          pInputText
          [value]="duration[0] + ' - ' + duration[1] + ' days'"
          readonly
        />
        <p-slider
          formControlName="duration"
          [min]="1"
          [max]="180"
          [range]="true"
          [step]="1"
        >
        </p-slider>
        <label for="duration">Duration</label>
      </span>
    </div>
    <div class="mb-5">
      <span class="p-float-label">
        <p-inputNumber
          mode="decimal"
          [minFractionDigits]="2"
          [maxFractionDigits]="2"
          formControlName="dailyFee"
          [min]="0.01"
          suffix=" GAS"
          id="dailyFee"
        ></p-inputNumber>
        <label for="dailyFee">Daily fee</label>
      </span>
    </div>
    <div class="mb-5">
      <span class="p-float-label">
        <p-inputNumber
          mode="decimal"
          [minFractionDigits]="2"
          [maxFractionDigits]="2"
          formControlName="collateral"
          [min]="0.01"
          suffix=" GAS"
          id="collateral"
        ></p-inputNumber>
        <label for="collateral">Collateral</label>
      </span>
    </div>
    <div class="mb-5">
      <span class="p-float-label">
        <p-inputNumber
          formControlName="timeDecay"
          [min]="0"
          id="vdot"
        ></p-inputNumber>
        <label for="timeDecay">Time Decay</label>
      </span>
    </div>
    <div class="mb-5">
      <span class="p-float-label">
        <p-inputNumber
          formControlName="leverage"
          [min]="0"
          id="leverage"
        ></p-inputNumber>
        <label for="leverage">Leverage</label>
      </span>
    </div>
    <div class="mb-5">
      <span class="p-float-label">
        <p-inputNumber
          formControlName="fee"
          suffix=" $CANDY"
          id="fee"
        ></p-inputNumber>
        <label for="fee">Protocol Fee</label>
      </span>
    </div>

    <div class="mb-5">
      <p-checkbox
        label="Safe exercise"
        [binary]="true"
        formControlName="safe"
      ></p-checkbox>
    </div>

    <div class="mb-5">
      <div class="flex">
        <p-checkbox [binary]="true" formControlName="agreement"></p-checkbox>
        <span class="ml-2">I am aware of the <a href="">risks</a></span>
      </div>
    </div>
    <div class="text-center p-fluid">
      <button
        pButton
        [disabled]="!form.valid"
        icon="pi pi-check"
        label="Confirm"
        type="submit"
        styleClass="p-button-text"
      ></button>
    </div>
  </form> -->
</ng-container>
