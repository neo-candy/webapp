<ng-container *ngIf="state$ | async as s">
  <p-table
    [value]="[s.token]"
    responsiveLayout="scroll"
    styleClass="p-datatable-sm"
  >
    <ng-template pTemplate="caption">Details</ng-template>
    <ng-template pTemplate="body" let-token>
      <tr>
        <td>ID</td>
        <td class="text-right">{{ token.tokenId }}</td>
      </tr>
      <tr>
        <td>Stake</td>
        <td class="text-right">
          <div class="flex align-items-center justify-content-end">
            {{ token.stake / 1000000000 | number: '1.0-0' }}
            <img src="assets/images/candy.png" height="20" class="ml-2" />
          </div>
        </td>
      </tr>
      <tr>
        <td>Value</td>
        <td class="text-right">
          <div class="flex align-items-center justify-content-end">
            {{ token.realValue / 1000000000 | number: '1.0-0' }}
            <img src="assets/images/candy.png" height="20" class="ml-2" />
          </div>
        </td>
      </tr>
      <tr>
        <td>Strike</td>
        <td class="text-right">
          ${{ token.strike / 100000000 | number: '1.2-2' }}
        </td>
      </tr>
      <tr>
        <td>Duration</td>
        <td class="text-right">
          {{ token.minRentInMinutes / 60 / 24 }} -
          {{ token.maxRentInMinutes / 60 / 24 }} days
        </td>
      </tr>
      <tr>
        <td>Vdot</td>
        <td class="text-right">{{ token.vdot }}</td>
      </tr>
      <tr>
        <td>Vi</td>
        <td class="text-right">{{ token.vi }}</td>
      </tr>
      <tr>
        <td>Gas/Day</td>
        <td class="text-right">
          {{ token.gasPerMinute * 60 * 24 | number: '1.2-2' }}
        </td>
      </tr>
      <tr>
        <td>Gas collateral</td>
        <td class="text-right">{{ token.collateral | number: '1.2-2' }}</td>
      </tr>
      <tr>
        <td>Safe</td>
        <td class="text-right">
          <span [ngClass]="token.safe ? 'pi pi-check' : 'pi pi-times'"></span>
        </td>
      </tr>
    </ng-template>
  </p-table>

  <div class="mt-5">
    <form [formGroup]="formGroup" (ngSubmit)="startRenting()">
      <div class="mt-3">
        <span class="p-float-label">
          <input type="text" pInputText [value]="duration + ' days'" readonly />
          <p-slider
            formControlName="duration"
            [min]="s.token.listing.minMinutes / 24 / 60"
            [max]="s.token.listing.maxMinutes / 24 / 60"
          ></p-slider>
          <label for="duration">Duration</label>
        </span>
      </div>
      <div class="mt-3">
        <div class="flex">
          <p-checkbox [binary]="true" formControlName="agreement"></p-checkbox>
          <span class="ml-2">I understand the <a href="">risks</a></span>
        </div>
      </div>

      <div class="p-fluid">
        <button
          pButton
          label="Confirm"
          class="mt-3"
          icon="pi pi-check"
          type="submit"
          [disabled]="!formGroup.valid"
        ></button>
      </div>
    </form>
  </div>
</ng-container>
